<html>

<head>
    <title>Rust Knowledge Quiz</title>
    <!--importing prism-->
    <link href="prism.css" rel="stylesheet"/>
    
    <style>
        h1 {
            text-align: center;
        }

        h2 {
            text-align: center;
        }

        p {
            text-align: left;
            font-size: 16px;
        }

        code {
            /*text-align: left;
            font-size: 16px;
            font-family: 'Courier New', Courier, monospace;
            */
            
            /*make it so people can't copy paste*/
            
            user-select: none; /*disable text selection*/
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            pointer-events: none; /*disable mouse events */
        }

        /* .questions {
    text-align: left;
    font-size: 16;
}

.container{
    margin-left: 100px;
    margin-right: 100px;
} */

        body {
            display: flex;
            justify-content: center;
            align-items: left;
        }

        #warn {
            color: red;
            text-align: center;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            align-items: stretch;
        }
    </style>

    <script src="prism.js"></script>

</head>

<body>
    <div id="container">
        <h1>Rust Knowledge Quiz</h1>

        <section>
            <h2>Question 1</h2>
            <p id="warn"></p>
            <div class="questions">
                <p>
                    Determine whether the program will pass the compiler. If it passes, write the 
                    expected output of the program if it were executed. (Taken from "The Rust 
                    Programming Language" by Steve Klabnik and Carol Nichols)
                </p>
                <pre><code class = "language-rust">
                    use std::ops::Deref;
                    <br>
                    <br>#[derive(Clone, Copy)]
                    <br>struct AccessLogger(i32);
                    <br>
                    <br>impl Deref for AccessLogger {
                    <br>&nbsp type Target = i32;
                    <br>&nbsp fn deref(&self) -> &Self::Target {
                    <br>&nbsp&nbsp println!("deref");
                    <br>&nbsp&nbsp &self.0
                    <br>&nbsp }
                    <br>}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let n = AccessLogger(-1);
                    <br>&nbsp let x = *n + 1;
                    <br>&nbsp let n2 = n
                    <br>&nbsp println!("{} {}", x, *n);
                    <br>}
                </code></pre>
                <br>
                <select name="q1" id="q1" onchange='checkVal1()'>
                    <option value=0>does NOT compile</option>
                    <option value=1>DOES compile</option>
                </select>
                <input type="text" id="q1Input" name="q1Input" style="visibility:hidden" placeholder="Type program output here.">
                
                <script>
                    function checkVal1() {
                        var element=document.getElementById("q1");
                        var inp=document.getElementById("q1Input");
                        if(element.value=="1") {
                            inp.style.visibility='visible';
                        }
                        else {
                            inp.style.visibility='hidden';
                        }
                    }
                </script>
            </div>
        </section>

        <section>
            <h2>Question 2</h2>
            <p id="warn"></p>
            <div class="questions">
                <p>
                    Determine whether the program will pass the compiler. If it passes, write the 
                    expected output of the program if it were executed.
                </p>
                <pre><code class = "language-rust">
                    fn main() {
                    <br>&nbsp let a = String::from("hello");
                    <br>&nbsp let b = &a;
                    <br>&nbsp let c = *b;
                    <br>&nbsp println!("{} {} {}", a, b, c);
                    <br>}
                </code></pre>
                <br>
                <select name="q2" id="q2" onchange='checkVal2()'>
                    <option value=0>does NOT compile</option>
                    <option value=1>DOES compile</option>
                </select>
                <input type="text" id="q2Input" name="q2Input" style="visibility:hidden" placeholder="Type program output here.">
                
                <script>
                    function checkVal2() {
                        var element=document.getElementById("q2");
                        var inp=document.getElementById("q2Input");
                        if(element.value=="1") {
                            inp.style.visibility='visible';
                        }
                        else {
                            inp.style.visibility='hidden';
                        }
                    }
                </script>
            </div>
        </section>

        <section>
            <h2>Question 3</h2>
            <p id="warn"></p>
            <div class="questions"> 
                <p>
                    Choose the options below that, if put into the blank ("__"), will allow the code to compile.
                </p>
                <pre><code class = "language-rust">
                    use std::ops::Deref;
                    <br>
                    <br>fn f (x:i32) {}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let i = 8;
                    <br>&nbsp let ir = &i;
                    <br>&nbsp f(__);
                    <br>}
                </code></pre>
                <br>
                <input type="checkbox" id="q3a" name="q3a">
                <label for="q3a"> *ir</label><br> <!--works-->
                <input type="checkbox" id="q3b" name="q3b">
                <label for="q3b"> ir</label><br> <!--doesn't work-->
                <input type="checkbox" id="q3c" name="q3c">
                <label for="q3c"> &ir</label><br> <!--doesn't work-->
            </div>
        </section>

        <section>
            <h2>Question 4</h2>
            <p id="warn"></p>
            <div class="questions"> 
                <p>
                    Choose the options below that, if put into the blank ("__"), will correctly print out "42".
                </p>
                <pre><code class = "language-rust">
                    use std::ops::Deref;
                    <br>struct IntContainer {
                    <br>&nbsp contents: i32,
                    <br>}
                    <br>
                    <br>impl Deref for IntContainer {
                    <br>&nbsp type Target = i32;
                    <br>&nbsp fn deref(&self) -> &Self::Target {
                    <br>&nbsp&nbsp &self.contents
                    <br>&nbsp }
                    <br>}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let i = IntContainer {contents: 42};
                    <br>&nbsp let ir = &i;
                    <br>&nbsp //fill in the blank below
                    <br>&nbsp let theInt : &i32 = __;
                    <br>&nbsp print!("{}", theInt);
                    <br>}
                </code></pre>
                <br>
                <input type="checkbox" id="q4a" name="q4a">
                <label for="q4a"> ir</label><br>
                <input type="checkbox" id="q4b" name="q4b">
                <label for="q4b"> *ir</label><br> <!--doesn't work-->
                <input type="checkbox" id="q4c" name="q4c">
                <label for="q4c"> &(ir)</label><br>
            </div>
        </section>

        <section>
            <h2>Question 5</h2>
            <p id="warn"></p>
            <div class="questions"> 
                <p>
                    Select the all the code options that, when placed into the blanks, will correctly print out "42" for that value.
                </p>
                <pre><code class = "language-rust">
                    use std::ops::Deref;
                    <br>
                    <br>struct S {
                    <br>&nbsp u:u32,
                    <br>}
                    <br>
                    <br>impl S {
                    <br>&nbsp fn f(&self) {}
                    <br>}
                    <br>
                    <br>fn take_s(_s: &S) {
                    <br>&nbsp //Fill in the blank so 42 will be printed
                    <br>&nbsp println!("{}", __); //LINE A
                    <br>}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let s = S {u: 42};
                    <br>&nbsp let sr = &s;
                    <br>&nbsp sr.f();
                    <br>&nbsp take_s(sr);
                    <br>}
                </code></pre>
                <br>
                <input type="checkbox" id="q5a" name="q5a">
                <label for="q5a"> _s.u</label><br>
                <input type="checkbox" id="q5b" name="q5b">
                <label for="q5b"> (*_s).u</label><br>
                <br>
            </div>
        </section>

        <section>
            <h2>Question 6</h2>
            <p id="warn"></p>
            <div class="questions">
                <p>
                    How can you fix the error being caused?
                </p>
                <pre><code class = "language-rust">
                    struct MyStruct {
                    <br>&nbsp name: String,
                    <br>&nbsp value: i32,
                    <br>}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let s = MyStruct {
                    <br>&nbsp&nbsp name: String::from("example"),
                    <br>&nbsp&nbsp value: 42,
                    <br>&nbsp };
                    <br>
                    <br>&nbsp s.value += 1;
                    <br>}
                </code></pre>
                <br>
                <input type="checkbox" id="q6a" name="q6a">
                <label for="q6a"> Change the <code>value</code> field to be mutable</label><br>
                <input type="checkbox" id="q6b" name="q6b">
                <label for="q6b"> Use a <code>RefCell&lti32&gt</code> for the <code>value</code> field</label><br>
                <input type="checkbox" id="q6c" name="q6c">
                <label for="q6c"> Change <code>let s</code> to <code>let mut s</code></label><br>
                <br>
                <!--b and c are correct-->
            </div>
        </section>

        <section>
            <h2>Question 7</h2>
            <p id="warn"></p>
            <div class="questions">
                <p>
                    What are the lifetimes of the following variables in this code? (Select from the lines labeled in parentheses)
                </p>
                <pre><code class = "language-rust">
                    ( ) fn main() { 
                    <br>(1) &nbsp let r;
                    <br>( ) &nbsp { 
                    <br>(2) &nbsp&nbsp let x = 5;
                    <br>(3) &nbsp&nbsp r = &x;
                    <br>( ) &nbsp }
                    <br>(4) &nbsp println!("r: {}", r);
                    <br>( ) }
                </code></pre>
                <br>
                <!--r's lifetime is 2-8; x's lifetime is 4-6 -->
                <p>Lifetime of <code>r</code>: </p>
                <input type="text" id="q7rBeginInput" name="q7rBeginInput" placeholder="r's lifetime begins">
                <p style="display:inline">to</p>
                <input type="text" id="q7rEndInput" name="q7rEndInput" placeholder="r's lifetime ends">
                <br>

                <p>Lifetime of <code>x</code>: </p>
                <input type="text" id="q7xBeginInput" name="q7xBeginInput" placeholder="x's lifetime begins">
                <p style="display:inline">to</p>
                <input type="text" id="q7xEndInput" name="q7xEndInput" placeholder="x's lifetime ends">
                <br>
            </div>
        </section>
        
        <section>
            <h2>Question 8</h2>
            <p id="warn"></p>
            <div class="questions">
                <p>
                    What function definition will make the code correctly print out <code>"world"</code>?
                </p>
                <pre><code class = "language-rust">
                    fn longest() { //REPLACE THIS LINE
                    <br>&nbsp if x.len() > y.len() {
                    <br>&nbsp&nbsp x
                    <br>&nbsp }
                    <br>&nbsp else {
                    <br>&nbsp&nbsp y
                    <br>&nbsp }
                    <br>}
                    <br>
                    <br>fn main() {
                    <br>&nbsp let s1 = "hello";
                    <br>&nbsp let s2 = "world";
                    <br>&nbsp let longest_str = longest(s1, s2);
                    <br>&nbsp println!("The longest string is: {}", longest_str);
                    <br>}
                </code></pre>
                <br>
                <input type="radio" id="q8a" name="q8a">
                <label for="q8a"> <code>fn longest&lt'a, 'b>(x, y) -> &'a str {</code></label><br>
                <input type="radio" id="q8b" name="q8b">
                <label for="q8b"> <code>fn longest&lt'a, 'b>(x: &'a str, y: &'b str) -> &'a str {</code></label><br>
                <input type="radio" id="q8c" name="q8c">
                <label for="q8c"> <code>fn longest&lt'a, 'b: 'a>(x: &'a str, y: &'b str) -> &'a str {</code></label><br>
                <br>
            </div>
        </section>

        <br />
        <p>Please answer all questions before submitting.</p>
        <div style="text-align: center;">
            <button type="button" id="submit">Submit</button>
        </div>
    </div>


<!--
    <script>
        document.getElementById('submit').addEventListener("click", () => {

            let yearsOfExp = document.getElementById("yearsOfExp").value;
            let rustExp = document.getElementById("rustExp").value;
            if (rustExp == -1) {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("rustExp").focus();
                return;
            }
            let linesOfCode = document.getElementById("linesOfCode").value;
            if (linesOfCode == -1) {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("linesOfCode").focus();
                return;
            }

            let java = document.querySelectorAll('input[name="java"]');
            let javaExp = '';
            for (const rb of java) {
                if (rb.checked) {
                    javaExp = rb.value;
                    break;
                }
            }
            if (javaExp == '') {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("java").focus();
                return;
            }

            let javascript = document.querySelectorAll('input[name="javascript"]');
            let jsExp = '';
            for (const rb of javascript) {
                if (rb.checked) {
                    jsExp = rb.value;
                    break;
                }
            }
            if (jsExp == '') {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("js").focus();
                return;
            }

            let clang = document.querySelectorAll('input[name="clang"]');
            let cExp = '';
            for (const rb of clang) {
                if (rb.checked) {
                    cExp = rb.value;
                    break;
                }
            }
            if (cExp == '') {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("c").focus();
                return;
            }

            let python = document.querySelectorAll('input[name="python"]');
            let pythonExp = '';
            for (const rb of python) {
                if (rb.checked) {
                    pythonExp = rb.value;
                    break;
                }
            }
            if (pythonExp == '') {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("python").focus();
                return;
            }

            let rustBook = document.getElementById("resources1").checked;
            let youtube = document.getElementById("resources2").checked;
            let stackOverflow = document.getElementById("resources3").checked;
            let other = document.getElementById("resources4").checked;

            let industry = document.getElementById("industry").value;
            if (industry == "") {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("industry").focus();
                return;
            }
            let gender = document.getElementById("gender").value;
            if (gender == -1) {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("gender").focus();
                return;
            }
            let age = document.getElementById("age").value;
            if (age == -1) {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("age").focus();
                return;
            }
            let degree = document.getElementById("degree").value;
            if (degree == -1) {
                document.getElementById("warn").innerHTML = "One or more questions are unanswered.";
                document.getElementById("degree").focus();
                return;
            }

            // //checking rustExp - how long they've been programming in Rust
            // if(document.getElementById("rustExp").value==-1){
            //     window.alert("Please tell us how long you've been programming in Rust.");
            // }
            // //checking java, javascript, clang, and python - what programming languages they have experience in
            // else if(document.querySelector('input[name="java"]:checked')==null
            // || document.querySelector('input[name="javascript"]:checked')==null
            // || document.querySelector('input[name="clang"]:checked')==null
            // || document.querySelector('input[name="python"]:checked')==null){
            //     window.alert("Please tell us what programming languages you have experience in.");
            // }
            // //checking resources - what resources they used to learn Rust
            // else if(!(document.getElementById("resources1").checked
            // ||document.getElementById("resources2").checked
            // ||document.getElementById("resources3").checked
            // ||document.getElementById("resources4").checked)) {
            //     window.alert("Please tell us how you learned Rust.");
            // }
            // //checking linesOfCode - how many lines of code they have written
            // else if(document.getElementById("linesOfCode").value==-1){
            //     window.alert("Please tell us how many lines of code you've written in Rust.");
            // }
            // //checking industry
            // else if(document.getElementById("industry").value=="Select"){
            //     window.alert("Please select your industry.");
            // }
            // //checking gender
            // else if(document.getElementById("gender").value==-1){
            //     window.alert("Please select your gender.");
            // }
            // //checking age
            // else if(document.getElementById("age").value==-1){
            //     window.alert("Please select your age.");
            // }
            // //checking degree
            // else if(document.getElementById("degree").value==-1){
            //     window.alert("Please select your level of education.");
            // }
            // else{
            //     //close webview, move onto thank you page
            //     window.location.replace("thankyoumessage.html");
            // }


            let results = {
                "experience": {
                    "codingExp": yearsOfExp,
                    "rustExp": rustExp,
                    "linesOfCode": linesOfCode,
                },
                "languages": {
                    "java": javaExp,
                    "javascript": jsExp,
                    "c": cExp,
                    "python": pythonExp,
                },
                "resources": {
                    "rustBook": rustBook,
                    "youtube": youtube,
                    "stackOverflow": stackOverflow,
                    "other": other,
                },

                "demographics": {
                    "industry": industry,
                    "gender": gender,
                    "age": age,
                    "degree": degree
                }
            }
            console.log(results);

            //Send a message to the extension with the form data
            const vscode = acquireVsCodeApi();
            vscode.postMessage({
                command: 'submitSurvey',
                text: results
            });
        });
    </script>
-->
</html>